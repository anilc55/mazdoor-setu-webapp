<!DOCTYPE html>
<html lang="hi" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡§Æ‡§ú‡§¶‡•Ç‡§∞ ‡§∏‡•á‡§§‡•Å - Mazdoor Setu</title>
    <meta name="description" content="Connecting workers with opportunities">
    <meta name="theme-color" content="#4CAF50">
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="assets/icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- Styles & Icons -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Hind:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ========== SPLASH SCREEN ========== -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <div class="flower-logo-animation">
                <div class="flower">
                    <div class="center"></div>
                    <div class="petal p1"></div>
                    <div class="petal p2"></div>
                    <div class="petal p3"></div>
                    <div class="petal p4"></div>
                    <div class="petal p5"></div>
                </div>
            </div>
            
            <div class="splash-text">
                <h1 class="hindi-title">‡§Æ‡§ú‡§¶‡•Ç‡§∞ ‡§∏‡•á‡§§‡•Å</h1>
                <h1 class="english-title">Mazdoor Setu</h1>
                <p class="tagline">Connecting Workers with Opportunities</p>
            </div>
            
            <div class="loading-indicator">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            
            <div class="version">Version 1.0.0</div>
        </div>
    </div>

    <!-- ========== MAIN APP CONTAINER ========== -->
    <div id="app-container" class="app-container hidden">
        <!-- Language Selection Screen -->
        <div id="language-screen" class="screen active">
            <div class="screen-content">
                <div class="language-header">
                    <h2><i class="fas fa-globe-asia"></i> ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç / Select Language</h2>
                    <p>Choose your preferred language</p>
                </div>
                
                <div class="language-cards">
                    <div class="language-card active" data-lang="hi" onclick="selectLanguage('hi')">
                        <div class="flag">üáÆüá≥</div>
                        <div class="lang-info">
                            <h3>‡§π‡§ø‡§Ç‡§¶‡•Ä</h3>
                            <p>Hindi</p>
                        </div>
                        <div class="checkmark">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                    
                    <div class="language-card" data-lang="en" onclick="selectLanguage('en')">
                        <div class="flag">üåê</div>
                        <div class="lang-info">
                            <h3>English</h3>
                            <p>‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä</p>
                        </div>
                        <div class="checkmark">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                </div>
                
                <button class="btn-primary btn-continue" onclick="showLoginScreen()">
                    <i class="fas fa-arrow-right"></i> ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç / Continue
                </button>
                
                <div class="language-footer">
                    <p class="note">‡§≠‡§æ‡§∑‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç / You can change language later</p>
                </div>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="screen">
            <div class="screen-content">
                <!-- Back Button -->
                <button class="btn-back" onclick="showLanguageScreen()">
                    <i class="fas fa-arrow-left"></i> <span id="back-text">‡§µ‡§æ‡§™‡§∏</span>
                </button>
                
                <!-- Login Header -->
                <div class="login-header">
                    <div class="login-logo">
                        <div class="mini-flower">
                            <div class="center"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                    </div>
                    <h2 id="login-title">‡§≤‡•â‡§ó‡§ø‡§® / Login</h2>
                    <p id="login-subtitle">‡§Ö‡§™‡§®‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</p>
                </div>
                
                <!-- Login Options -->
                <div class="login-options">
                    <div class="option-card" onclick="showOTPSection()">
                        <div class="option-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="option-content">
                            <h3>OTP ‡§≤‡•â‡§ó‡§ø‡§®</h3>
                            <p>‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§∏‡•á ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</p>
                        </div>
                        <div class="option-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <div class="option-card" onclick="guestLogin()">
                        <div class="option-icon">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <div class="option-content">
                            <h3>‡§Ö‡§§‡§ø‡§•‡§ø ‡§™‡•ç‡§∞‡§µ‡•á‡§∂</h3>
                            <p>‡§¨‡§ø‡§®‡§æ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡•á ‡§¶‡•á‡§ñ‡•á‡§Ç</p>
                        </div>
                        <div class="option-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <div class="option-card" onclick="showRegistration()">
                        <div class="option-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="option-content">
                            <h3>‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£</h3>
                            <p>‡§®‡§Ø‡§æ ‡§Ö‡§ï‡§æ‡§â‡§Ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Ç</p>
                        </div>
                        <div class="option-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <!-- Development Login (Visible only in dev mode) -->
                    <div class="option-card dev-login" onclick="devLogin()" style="display: none;">
                        <div class="option-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <div class="option-content">
                            <h3>Development Login</h3>
                            <p>Bypass OTP for testing</p>
                        </div>
                        <div class="option-arrow">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
                
                <!-- OTP Section -->
                <div id="otp-section" class="otp-section hidden">
                    <div class="otp-header">
                        <h3><i class="fas fa-sms"></i> OTP ‡§≠‡•á‡§ú‡•á‡§Ç</h3>
                        <p>‡§Ö‡§™‡§®‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</p>
                    </div>
                    
                    <div class="phone-input-group">
                        <div class="country-code">
                            +91
                        </div>
                        <input type="tel" 
                               id="phone-number" 
                               class="phone-input" 
                               placeholder="97025 59135"
                               maxlength="10"
                               pattern="[0-9]{10}"
                               required>
                    </div>
                    
                    <div class="error-message" id="phone-error"></div>
                    
                    <button class="btn-primary btn-send-otp" onclick="sendOTP()" id="send-otp-btn">
                        <i class="fas fa-paper-plane"></i> OTP ‡§≠‡•á‡§ú‡•á‡§Ç
                    </button>
                    
                    <!-- OTP Input Section -->
                    <div id="otp-input-section" class="otp-input-section hidden">
                        <div class="otp-instructions">
                            <p><i class="fas fa-info-circle"></i> 6 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ OTP ‡§Ü‡§™‡§ï‡•á ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§™‡§∞ ‡§≠‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à</p>
                        </div>
                        
                        <div class="otp-inputs">
                            <input type="number" class="otp-digit" maxlength="1" data-index="0">
                            <input type="number" class="otp-digit" maxlength="1" data-index="1">
                            <input type="number" class="otp-digit" maxlength="1" data-index="2">
                            <input type="number" class="otp-digit" maxlength="1" data-index="3">
                            <input type="number" class="otp-digit" maxlength="1" data-index="4">
                            <input type="number" class="otp-digit" maxlength="1" data-index="5">
                        </div>
                        
                        <div class="otp-timer" id="otp-timer">
                            <i class="fas fa-clock"></i> OTP ‡§∏‡§Æ‡§Ø: <span id="timer">60</span> ‡§∏‡•á‡§ï‡§Ç‡§°
                        </div>
                        
                        <button class="btn-success btn-verify-otp" onclick="verifyOTP()" id="verify-otp-btn">
                            <i class="fas fa-check-circle"></i> ‡§µ‡•á‡§∞‡§ø‡§´‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç
                        </button>
                        
                        <button class="btn-text btn-resend-otp" onclick="resendOTP()" id="resend-otp-btn" disabled>
                            <i class="fas fa-redo"></i> OTP ‡§™‡•Å‡§®‡§É ‡§≠‡•á‡§ú‡•á‡§Ç
                        </button>
                    </div>
                    
                    <!-- Terms & Conditions -->
                    <div class="terms">
                        <p>‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡§ï‡•á, ‡§Ü‡§™ ‡§π‡§Æ‡§æ‡§∞‡•Ä <a href="#">‡§∂‡§∞‡•ç‡§§‡•á‡§Ç</a> ‡§î‡§∞ <a href="#">‡§ó‡•ã‡§™‡§®‡•Ä‡§Ø‡§§‡§æ ‡§®‡•Ä‡§§‡§ø</a> ‡§∏‡•ç‡§µ‡•Ä‡§ï‡§æ‡§∞ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç</p>
                    </div>
                </div>
                
                <!-- Registration Section -->
                <div id="registration-section" class="registration-section hidden">
                    <!-- Registration form will be loaded dynamically -->
                </div>
            </div>
        </div>
        
        <!-- Role Selection Screen -->
        <div id="role-screen" class="screen">
            <div class="screen-content">
                <div class="role-header">
                    <h2><i class="fas fa-user-tag"></i> ‡§Ö‡§™‡§®‡•Ä ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç</h2>
                    <p>Choose your role in the platform</p>
                </div>
                
                <div class="role-cards">
                    <div class="role-card" onclick="selectRole('mazdoor')">
                        <div class="role-icon">
                            <i class="fas fa-hard-hat"></i>
                        </div>
                        <div class="role-info">
                            <h3>‡§Æ‡§ú‡§¶‡•Ç‡§∞</h3>
                            <p>Worker / Labour</p>
                            <ul class="role-features">
                                <li><i class="fas fa-check"></i> ‡§®‡•å‡§ï‡§∞‡•Ä ‡§ñ‡•ã‡§ú‡•á‡§Ç</li>
                                <li><i class="fas fa-check"></i> ‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤ ‡§¨‡§®‡§æ‡§è‡§Ç</li>
                                <li><i class="fas fa-check"></i> ‡§ï‡§æ‡§Æ ‡§ï‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏</li>
                            </ul>
                        </div>
                        <div class="role-select">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <div class="role-card" onclick="selectRole('contractor')">
                        <div class="role-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="role-info">
                            <h3>‡§†‡•á‡§ï‡•á‡§¶‡§æ‡§∞</h3>
                            <p>Contractor</p>
                            <ul class="role-features">
                                <li><i class="fas fa-check"></i> ‡§Æ‡§ú‡§¶‡•Ç‡§∞ ‡§ñ‡•ã‡§ú‡•á‡§Ç</li>
                                <li><i class="fas fa-check"></i> ‡§≤‡•Ä‡§° ‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç</li>
                                <li><i class="fas fa-check"></i> ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§Æ‡•à‡§®‡•á‡§ú ‡§ï‡§∞‡•á‡§Ç</li>
                            </ul>
                        </div>
                        <div class="role-select">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <div class="role-card" onclick="selectRole('owner')">
                        <div class="role-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="role-info">
                            <h3>‡§Æ‡§ï‡§æ‡§® ‡§Æ‡§æ‡§≤‡§ø‡§ï</h3>
                            <p>Property Owner</p>
                            <ul class="role-features">
                                <li><i class="fas fa-check"></i> ‡§ï‡§Æ‡§∞‡§æ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</li>
                                <li><i class="fas fa-check"></i> ‡§ü‡•á‡§®‡§Ç‡§ü ‡§¢‡•Ç‡§Ç‡§¢‡•á‡§Ç</li>
                                <li><i class="fas fa-check"></i> ‡§™‡•ç‡§∞‡•â‡§™‡§∞‡•ç‡§ü‡•Ä ‡§Æ‡•à‡§®‡•á‡§ú ‡§ï‡§∞‡•á‡§Ç</li>
                            </ul>
                        </div>
                        <div class="role-select">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
                
                <div class="role-footer">
                    <p class="note">‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç / You can change role later</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden Elements -->
    <div id="recaptcha-container" style="display: none;"></div>
    <div id="notification-container" class="notification-container"></div>
    
    <!-- Scripts -->
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
    
    <!-- Initialize PWA -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
        
        // Show dev login in development mode
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            document.querySelector('.dev-login').style.display = 'flex';
        }
    </script>
</body>
</html>
